async function getMeasure(date){let response=await fetch("http://localhost:8000/getMeasure?date="+date);let data=await response.json();const measureData=document.querySelectorAll('div[class="measure-info-card mt-3 p-3 d-flex flex-column justify-content-around"]>p');measureData[0].textContent=data[0].address_of_measure;measureData[1].textContent=formateDate(data[0].date_time_of_measure)}async function getDates(){let response=await fetch("http://localhost:8000/getallDates");let data=await response.json();const options=await data;const menu=document.querySelector("ul");menu.innerHTML="";for(let i=0;i<options.length;i++){const element=document.createElement("li");element.textContent=formateDate(options[i]["date_time_of_measure"]);element.classList.add("p3","text-dark");element.addEventListener("click",function(event){document.querySelector('input[type="text"]').value=event.target.textContent;getMeasure(event.target.textContent)});menu.append(element)}}function formateDate(dateString){const date=new Date(dateString);const year=date.getFullYear();const month=("0"+(date.getMonth()+1)).slice(-2);const day=("0"+date.getDate()).slice(-2);const hours=("0"+date.getHours()).slice(-2);const minutes=("0"+date.getMinutes()).slice(-2);const seconds=("0"+date.getSeconds()).slice(-2);const formattedDate=`${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;return formattedDate}function recreateSignal(signal){let sampleCount=0;let negativeCicle=signal.map(sample=>{return sample*-1});for(let pos=0;pos<signal.length;pos++){if(signal[pos]==0&signal[pos+1]>0){pos+=1;while(signal[pos]>0&signal[pos+1]>0){if(sampleCount==signal.length){break}pos+=1;sampleCount+=1}break}}negativeCicle.splice(0,-sampleCount);for(let i=0;i<sampleCount+2;i++){negativeCicle.unshift(0)}return negativeCicle}const signal={signal:[],peak:[],zerocross:[],time:[]};const reconstructedSignal={positiveCicle:[],negativeCicle:[]};const charts=document.querySelectorAll("canvas");signal["zerocross"]=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164,3.164];signal["signal"]=[.04,.317,.635,.754,.992,1.151,1.429,1.706,2.063,2.341,2.579,2.738,2.897,2.976,3.095,3.095,3.175,3.095,3.214,3.135,3.135,3.055,2.976,2.778,2.659,2.381,2.103,1.706,1.389,.952,.635,.278,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.159,.476,.675,.913,1.111,1.389,1.667,2.024,2.302,2.54,2.659,2.897,2.936,3.055,3.055,3.095,3.055,3.135,3.095,3.095,3.016,2.936,2.738,2.619,2.341,2.063,1.667,1.349,.952,.635,.238,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.278,.556,.714,.952,1.111,1.389,1.627,1.984,2.262,2.579,2.698,2.897,2.936,3.095,3.095,3.175,3.095,3.175,3.135,3.175,3.055,3.016,2.857,2.698,2.421,2.182,1.746,1.468,1.032,.714,.317,.079,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.079,.436,.635,.873,1.071,1.349,1.587,1.944,2.222,2.5,2.619,2.857,2.897,3.016,3.055,3.135,3.055,3.135,3.095,3.095,3.016,2.976,2.778,2.659,2.381,2.143,1.706,1.429,.992,.675,.317,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];signal["tempo"]=[0,3e-4,5e-4,8e-4,.001,.0013,.0016,.0018,.0021,.0023,.0026,.0029,.0031,.0034,.0036,.0039,.0042,.0044,.0047,.0049,.0052,.0055,.0057,.006,.0062,.0065,.0068,.007,.0073,.0076,.0078,.0081,.0083,.0086,.0089,.0091,.0094,.0096,.0099,.0102,.0104,.0107,.0109,.0112,.0115,.0117,.012,.0122,.0125,.0128,.013,.0133,.0135,.0138,.0141,.0143,.0146,.0148,.0151,.0154,.0156,.0159,.0161,.0164,.0167,.0169,.0172,.0174,.0177,.018,.0182,.0185,.0187,.019,.0193,.0195,.0198,.0201,.0203,.0206,.0208,.0211,.0214,.0216,.0219,.0221,.0224,.0227,.0229,.0232,.0234,.0237,.024,.0242,.0245,.0247,.025,.0253,.0255,.0258,.026,.0263,.0266,.0268,.0271,.0273,.0276,.0279,.0281,.0284,.0286,.0289,.0292,.0294,.0297,.0299,.0302,.0305,.0307,.031,.0312,.0315,.0318,.032,.0323,.0325,.0328,.0331,.0333,.0336,.0339,.0341,.0344,.0346,.0349,.0352,.0354,.0357,.0359,.0362,.0365,.0367,.037,.0372,.0375,.0378,.038,.0383,.0385,.0388,.0391,.0393,.0396,.0398,.0401,.0404,.0406,.0409,.0411,.0414,.0417,.0419,.0422,.0424,.0427,.043,.0432,.0435,.0437,.044,.0443,.0445,.0448,.045,.0453,.0456,.0458,.0461,.0464,.0466,.0469,.0471,.0474,.0477,.0479,.0482,.0484,.0487,.049,.0492,.0495,.0497,.05,.0503,.0505,.0508,.051,.0513,.0516,.0518,.0521,.0523,.0526,.0529,.0531,.0534,.0536,.0539,.0542,.0544,.0547,.0549,.0552,.0555,.0557,.056,.0562,.0565,.0568,.057,.0573,.0575,.0578,.0581,.0583,.0586,.0589,.0591,.0594,.0596,.0599,.0602,.0604,.0607,.0609,.0612,.0615,.0617,.062,.0622,.0625,.0628,.063,.0633,.0635,.0638,.0641,.0643,.0646,.0648,.0651,.0654,.0656,.0659,.0661,.0664,.0667,.0669,.0672,.0674,.0677,.068,.0682,.0685,.0687];signal["peak"]=[3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214,3.214];const options={responsive:true,scales:{x:{title:{display:true,text:"Tempo(s)",color:"white"},ticks:{color:"white"}},y:{title:{display:true,text:"TensÃ£o (V)",color:"white"},ticks:{color:"white"}}}};new Chart(charts[0].getContext("2d"),{type:"line",data:{labels:signal["tempo"],datasets:[{label:"Sinal",data:signal["signal"],color:"rgb(255,255,255)",backgroundColor:"rgba(58, 178, 223,0.18)",borderColor:"rgba(58, 178, 223,0.9)",pointRadius:0,tension:.3,fill:true,borderWidth:1.5},{label:"Pico",data:signal["peak"],color:"white",backgroundColor:"rgba(182, 116, 246,0.06)",borderColor:"rgba(182, 116, 246,0.9)",pointRadius:0,tension:1,fill:true,borderWidth:1.5},{label:"Passagem por zero",data:signal["zerocross"],color:"rgb(255,255,255)",backgroundColor:"rgba(51, 214, 89,0.18)",borderColor:"rgba(51, 214, 89,0.9)",pointRadius:0,tension:.4,fill:true,borderWidth:1.5}]},options:options});let newsignal=recreateSignal(signal["signal"]);new Chart(charts[1].getContext("2d"),{type:"line",data:{labels:signal["tempo"],datasets:[{label:"Semi Ciclo Positivo",data:signal["signal"],color:"rgb(255,255,255)",backgroundColor:"rgba(58, 178, 223,0.10)",borderColor:"rgba(58, 178, 223,0.9)",pointRadius:0,tension:.2,fill:true,borderWidth:1.5},{label:"Semi Ciclo Negativo",data:newsignal,color:"rgb(255,255,255)",backgroundColor:"rgba(182, 116, 246,0.10)",borderColor:"rgba(182, 116, 246,0.9)",pointRadius:0,tension:.2,fill:true,borderWidth:1.5}]},options:options});